# Advanced Docker Interview Questions 

---

## 41. How do you update secrets/configs without restarting containers?

### Explanation
Docker cannot update secrets/configs dynamically without restarting, but orchestration tools can.

### Methods
- Docker Swarm configs (in-memory files)
- Kubernetes Secrets/ConfigMaps with auto-reload sidecars
- External secret managers (AWS Secrets Manager, Vault, Azure Key Vault)

### Real-World Example
We used Vault Agent to refresh secrets automatically without restarting app containers.

---

## 42. How do you prevent container escape vulnerabilities?

### Security Practices
- Run as non-root
- Use seccomp, AppArmor, SELinux
- Disable privileged containers
- Enable user namespace remapping
- Use read-only root filesystems

### Real-World Example
We enforced a custom seccomp profile across production containers to block dangerous syscalls.

---

## 43. How do you avoid race conditions during container startup?

### Solutions
- Use init containers
- Add health checks
- Add entrypoint wait scripts:
  ```bash
  until nc -z db 3306; do sleep 2; done

### Real-World Example

A Django app waited for PostgreSQL using a readiness script, preventing connection failures.

---

## 44. What are zombie containers and how do you clean them up?

### Explanation

Zombie containers: exited/stopped containers consuming disk space.

### Cleanup

```bash
docker rm $(docker ps -aq)
docker system prune
```

### Real-World Example

We automated nightly cleanup using `docker container prune`.

---

## 45. How do you run Docker containers on Kubernetes vs standalone Docker?

### Standalone Docker

```bash
docker run -d -p 80:80 nginx
```

### Kubernetes

```yaml
apiVersion: apps/v1
kind:Deployment
spec:
  replicas:3
  template:
    spec:
      containers:
      - name:nginx
        image:nginx
```

### Real-World Example

We moved services from Docker Compose to Kubernetes for auto-scaling and rollouts.

---

## 46. How do you simulate network failures in containers for testing?

### Tools

* Pumba
* Chaos Mesh
* tc/netem

### Example

```bash
pumba netem --interface eth0 delay --time 3000 container_name
```

### Real-World Example

We used Pumba to simulate latency and packet loss for backend retry testing.

---

## 47. What are the common issues with Docker and IPv6?

### Issues

* Disabled by default
* Limited NAT support
* Images may not support IPv6
* Manual routing required

### Real-World Example

IPv6 compliance failed until we added IPv6 NAT rules on the Docker host.

---

## 48. How do you enable IPv6 support for Docker containers?

### Steps

1. Edit daemon.json:

   ```json
   {
     "ipv6": true,
     "fixed-cidr-v6": "2001:db8:1::/64"
   }
   ```
2. Restart Docker:

   ```bash
   systemctl restart docker
   ```

### Real-World Example

We enabled IPv6 to meet dual-stack government compliance.

---

## 49. How do you configure custom DNS for Docker containers?

### Per container

```bash
docker run --dns=8.8.8.8 --dns=1.1.1.1 nginx
```

### Global

```json
{
  "dns": ["8.8.8.8", "1.1.1.1"]
}
```

### Real-World Example

We configured internal corporate DNS across all containers.

---

## 50. How do you restrict container access to certain domains or IPs?

### Methods

* iptables/nftables
* Docker network isolation
* Host firewalls
* Service mesh
* Calico/Cilium network policies

### Example

```bash
iptables -A OUTPUT -p tcp -d blocked.com -j DROP
```

### Real-World Example

We restricted production containers from accessing external public IPs.

---

## 51. How do you automate container health and readiness checks?

### Methods

* Dockerfile HEALTHCHECK
* Docker Compose healthcheck
* Kubernetes liveness/readiness probes

### Example

```dockerfile
HEALTHCHECK CMD curl -f http://localhost:8080/health || exit 1
```

### Real-World Example

Unhealthy containers were restarted automatically in Docker Compose.

---

## 52. How do you roll back a faulty image deployed to production?

### Methods

* Redeploy previous version
* Avoid using latest
* Kubernetes rollback:

  ```bash
  kubectl rollout undo deployment/myapp
  ```

### Real-World Example

A faulty image was rolled back quickly by deploying the previous version tag.

---

## 53. What is Docker’s image signing mechanism?

### Explanation

Docker Content Trust (DCT) signs images and verifies authenticity.

### Enable

```bash
export DOCKER_CONTENT_TRUST=1
```

### Real-World Example

All production images were required to be signed before deployment.

---

## 54. How do you restrict container image sources to trusted registries?

### Methods

* Allow-list registries in daemon.json
* Enforce DCT signatures
* Block external registries using firewall
* Use private registries only

### Real-World Example

Only Harbor registry was allowed; Docker Hub was blocked for production nodes.

---

## 55. What are container runtime interfaces (CRI)? How does Docker interact with them?

### Explanation

CRI defines how Kubernetes communicates with container runtimes.

### Runtimes

* containerd
* CRI-O
* runc
* gVisor

Docker → containerd → runc (under the hood)

### Real-World Example

We migrated workloads to containerd after Kubernetes deprecated Docker runtime.

---

## 56. How does Docker manage shared layers across images?

### Explanation

Docker stores image layers in a shared cache.
If two images share a layer, it is stored once and reused.

### Real-World Example

Microservices using `python:3.11` shared layers, reducing disk usage.

---

## 57. What’s the purpose of squash option while building images?

### Explanation

Squash merges multiple layers into one.

### Benefits

* Smaller images
* Hide intermediate layers
* Remove sensitive build files

### Example

```bash
docker build --squash -t myapp .
```

### Real-World Example

We squashed images that had temporary credentials in build layers.

---

## 58. What are tmpfs mounts and their benefits in Docker?

### Explanation

tmpfs mounts store data in RAM.

### Benefits

* Very fast
* Auto-clean on restart
* Good for sensitive/temp data

### Example

```bash
docker run --tmpfs /tmp myapp
```

### Real-World Example

We used tmpfs for session caches to avoid slow disk writes.

---

## 59. How can you isolate containers using AppArmor/SELinux profiles?

### AppArmor

```bash
docker run --security-opt apparmor=profile_name myapp
```

### SELinux

```bash
docker run --security-opt label:type:container_t myapp
```

### Real-World Example

SELinux enforcing mode prevented containers from accessing restricted host directories.

---

## 60. How do you perform fine-grained container access controls?

### Methods

* Linux capabilities (`--cap-drop`, `--cap-add`)
* seccomp profiles
* AppArmor/SELinux
* Network policies
* Cloud IAM roles

### Example

```bash
docker run --cap-drop=ALL --cap-add=NET_BIND_SERVICE myapp
```

### Real-World Example

We dropped all capabilities except the needed one, reducing attack surface.

